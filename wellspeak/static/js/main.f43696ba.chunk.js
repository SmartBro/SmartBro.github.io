(this["webpackJsonpchat-bot"]=this["webpackJsonpchat-bot"]||[]).push([[0],{48:function(e,t,n){e.exports=n(63)},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(20),o=n.n(s),c=n(31);n(59),n(60);function i(e){var t=e.className;return a.a.createElement("div",{className:t},a.a.createElement("h2",null,"Wellspeak Bot"),a.a.createElement("img",{src:"female_avatar.svg",alt:"female avatar"}))}n(61);var u=n(35),p=n.n(u);n(62);function E(e){var t=e.className,n=e.isYours,r=e.text,s=p()("message-wrapper",{"message-yours":n}),o=p()("message",t);return a.a.createElement("div",{className:s},a.a.createElement("div",{className:o},r))}var l="SPEAK_END",S="BOT_RESPONSE_REQUESTED",f=n(12),O=new(window.SpeechRecognition||window.webkitSpeechRecognition);O.interimResults=!0,O.lang="en-US",O.start(),O.addEventListener("result",(function(e){var t=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");d.forEach((function(e){return e(t)})),e.results[0].isFinal&&g.forEach((function(e){return e(t)}))})),O.addEventListener("end",O.start);var g=[],d=[],m=function(e,t){return g.push(e),Object(f.a)(t)&&d.push(t),g.length-1},h=function(e){g.splice(e,1)};var v={startSpeaking:function(){return{type:"SPEAK_START"}},stopSpeaking:function(e){return{type:"SPEAK_END",payload:e}}};var b=Object(c.b)((function(e){return{isSpeaking:e.isSpeaking,isBotAnswering:e.isBotAnswering,messages:e.messages}}),v)((function(e){var t=e.className,n=e.isSpeaking,s=e.isBotAnswering,o=e.messages,c=e.startSpeaking,i=e.stopSpeaking;return Object(r.useEffect)((function(){c();var e=m((function(e){i(e)}));return function(){return h(e)}})),a.a.createElement("div",{className:t},o.map((function(e,t){return a.a.createElement(E,{isYours:e.isYours,text:e.text,key:t})})),s?a.a.createElement(E,{isYours:!1,text:"..."}):"",n?a.a.createElement(E,{isYours:!0,text:"..."}):"")}));var y=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(i,{className:"avatar-box"}),a.a.createElement(b,{className:"chat-box"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(17),j=n(70),w=n(69),N=n(46),P=n(21),T=n(42),R=n(67),k=n(68),A=n(43),B=new SpeechSynthesisUtterance,I=[];speechSynthesis.addEventListener("voiceschanged",(function(){var e=(this.getVoices()||[]).filter((function(e){return e.lang.includes("en")}));B.voice=e.find((function(e){return"Samantha"===e.voiceURI}))||e[0]})),B.addEventListener("end",(function(){I.length&&C(I.unshift())}));var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";speechSynthesis.speaking?I.push(e):(B.text=e,speechSynthesis.speak(B))};var D=n(71),U="".concat("https://api.pandorabots.com","/atalk?botkey=").concat("I0Nu18SASdsfw0QbgPN91ykXwFPPoc2-SCjfp1sAd-ZS7RueYFzHNIJ31_52M6ZjdaDTwGMnxsU~"),x=n(36),L=n(44);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(L.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={isError:!1,isSpeaking:!1,isSpeechLoading:!1,isBotAnswering:!1,messages:[]},Q=function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var r=t(n);return console.log("next state",e.getState()),console.groupEnd(),r}}},V=Object(j.a)((function(e){return e.pipe(Object(N.a)("BOT_RESPONSE_SUCCESS"),Object(k.a)((function(e){return C(e.payload)})),Object(P.a)((function(){return{type:"SPEAK_START"}})))}),(function(e){return e.pipe(Object(N.a)("BOT_RESPONSE_REQUESTED"),Object(T.a)((function(e){return(t=e.payload,Object(D.a)({url:"".concat(U,"&input=").concat(encodeURI(t)),method:"POST",headers:{"Content-Type":"application/json"}})).pipe(Object(P.a)((function(e){return{type:"BOT_RESPONSE_SUCCESS",payload:e.response.responses.join(" ")}})),Object(R.a)((function(e){return Object(A.a)({type:"BOT_RESPONSE_FAIL",error:e})})));var t})))}),(function(e){return e.pipe(Object(N.a)(l),Object(P.a)((function(e){return{type:S,payload:e.payload}})))})),G=Object(w.a)(),J=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.c)(Object(_.a)(Q,G)),M=Object(_.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SPEAK_START":return F({},e,{isSpeaking:!0});case"SPEAK_END":return F({},e,{isSpeaking:!1,messages:[].concat(Object(x.a)(e.messages),[{isYours:!0,text:t.payload}])});case"VOICE_RECOGNITION_REQUESTED":return F({},e,{isSpeechLoading:!0});case"VOICE_RECOGNITION_SUCCESS":return F({},e,{isSpeechLoading:!1,isError:!1});case"VOICE_RECOGNITION_FAIL":return F({},e,{isSpeechLoading:!1,isError:!0});case"BOT_RESPONSE_REQUESTED":return F({},e,{isBotAnswering:!0});case"BOT_RESPONSE_SUCCESS":return F({},e,{isBotAnswering:!1,isError:!1,messages:[].concat(Object(x.a)(e.messages),[{isYours:!1,text:t.payload}])});case"BOT_RESPONSE_FAIL":return F({},e,{isBotAnswering:!1,isError:!0});default:return e}}),J);G.run(V),o.a.render(a.a.createElement(c.a,{store:M},a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.f43696ba.chunk.js.map